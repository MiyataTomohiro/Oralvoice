<configuration>
  <appSettings>
    <add key="PYTHONPATH" value="d:\home\site\wwwroot" />
    <add key="WSGI_HANDLER" value="main.application" />
    <add key="WSGI_LOG" value="D:\home\site\wwwroot\LogFiles\wfastcgi.log"/>
  </appSettings>
  <system.webServer>
      <modules runAllManagedModulesForAllRequests="true" />
      <handlers>
        <add name = "Python FastCGI"
             path="*"
             verb="*"
             modules="FastCgiModule"
             scriptProcessor="D:\home\python364x64\python.exe|D:\home\python364x64\wfastcgi.py"
             resourceType="Unspecified"
             requireAccess="Script" />
      </handlers>
      <rewrite>
        <rules>
          <rule name="Static Files" stopProcessing="true">
            <conditions>
              <add input="true" pattern="false" />
            </conditions>
          </rule>
          <rule name="Configure Python" stopProcessing="true">
            <match url="(.*)" ignoreCase="false" />
            <conditions>
              <add input="{REQUEST_URI}" pattern="^/static/.*" ignoreCase="true" negate="true" />
            </conditions>
            <action type="Rewrite" url="handler.fcgi/{R:1}" appendQueryString="true" />
          </rule>
        </rules>
      </rewrite> 
      <httpErrors errorMode="Detailed"></httpErrors>
  </system.webServer>
</configuration>